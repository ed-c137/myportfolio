<!DOCTYPE html>
<html data-html-server-rendered="true" lang="en" data-vue-tag="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>Testing Rails generators with ease. - Edrick.xyz</title><meta name="gridsome:hash" content="46cfa69c2391f66a55f0ae1f8a060cb3a6b05f71"><meta data-vue-tag="ssr" charset="utf-8"><meta data-vue-tag="ssr" name="generator" content="Gridsome v0.7.23"><meta data-vue-tag="ssr" data-key="viewport" name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><meta data-vue-tag="ssr" data-key="format-detection" name="format-detection" content="telephone=no"><meta data-vue-tag="ssr" data-key="description" name="description" content="A personal portfolio site with blog built using Gatsby."><link data-vue-tag="ssr" rel="icon" href="data:,"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="16x16" href="/assets/static/favicon.ce0531f.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="32x32" href="/assets/static/favicon.ac8d93a.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="96x96" href="/assets/static/favicon.b9532cc.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="76x76" href="/assets/static/favicon.f22e9f3.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="152x152" href="/assets/static/favicon.62d22cb.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="120x120" href="/assets/static/favicon.1539b60.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="167x167" href="/assets/static/favicon.dc0cdc5.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="180x180" href="/assets/static/favicon.7b22250.9bb7ffafafc09ac851d81afb65b8ef59.png"><link rel="preload" href="/assets/css/0.styles.16c8f4ee.css" as="style"><link rel="preload" href="/assets/js/app.5fe32469.js" as="script"><link rel="preload" href="/assets/js/page--src--templates--post-vue.6ce8b82f.js" as="script"><link rel="preload" href="/assets/js/13.d0387864.js" as="script"><link rel="preload" href="/assets/js/14.f6f22d9c.js" as="script"><link rel="prefetch" href="/assets/js/11.2aa4934a.js"><link rel="prefetch" href="/assets/js/12.81d6a710.js"><link rel="prefetch" href="/assets/js/page--node-modules--gridsome--app--pages--404-vue.28c8ff37.js"><link rel="prefetch" href="/assets/js/page--src--pages--aboutme-vue.67ebe2c1.js"><link rel="prefetch" href="/assets/js/page--src--pages--contact-vue.8a5e6c43.js"><link rel="prefetch" href="/assets/js/page--src--pages--index-vue.801fc362.js"><link rel="prefetch" href="/assets/js/page--src--pages--projects-vue.140c903b.js"><link rel="prefetch" href="/assets/js/page--src--templates--project-vue.bfeafda8.js"><link rel="prefetch" href="/assets/js/page--src--templates--tag-vue.331b39cb.js"><link rel="prefetch" href="/assets/js/vendors~page--src--pages--contact-vue.ee12dddd.js"><link rel="stylesheet" href="/assets/css/0.styles.16c8f4ee.css"><noscript data-vue-tag="ssr"><style>.g-image--loading{display:none;}</style></noscript>
  </head>
  <body >
    <div data-server-rendered="true" id="app" class="global-wrapper dark" data-v-03f32b16 data-v-0f5df326><div class="content-wrapper" data-v-03f32b16><header class="global-header" data-v-03f32b16><a href="/aboutme/" class="profile-brand__wrap" data-v-03f32b16><span class="profile-pic__wrap" data-v-03f32b16><img src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-b0b2ca2b1ad57466fb857b30d72a4ced'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-b0b2ca2b1ad57466fb857b30d72a4ced)' width='200' height='200' xlink:href='data:image/jpeg%3bbase64%2c/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCABAAEADASIAAhEBAxEB/8QAGwAAAgMBAQEAAAAAAAAAAAAABQYDBAcAAgH/xAAvEAACAQQABAQFBAMBAAAAAAABAgMABAURBhIhMRMUQVEHIjJhcYGRobEVQlJi/8QAGAEBAQEBAQAAAAAAAAAAAAAAAgMAAQT/xAAeEQEAAgIDAQEBAAAAAAAAAAABAAIRIQMxQRIEIv/aAAwDAQACEQMRAD8Azz/GzyNuOIsNcxPYAfc1YxVxj7Gdnuby1HKpJAkVgB%2bR0pU%2bKfEjvef4PHzMtpagJOUOvEkHofsP7rPGZmO2Yk/c13AdzD6Ri4o4tyOayUsi3U8NoG1DAjlVRR26D1%2b9RW3FmYtoVjgvZo9eqOV5vyAdfrQCurfTB8VfI/Yn4l5OzHLcIl5H7TnZH4bvT7wxxXZcSQyJFELe6ReZ4SoI17qfUVglNXAXiW9890rFFXScwPuetOvI%2byVvzUXJqOOZm3dScvbeunSqds3z9a9XnMxDONFhuvFsu2qauZZ0zNrqaS4uZZpjzSyOXY%2b5J2aiq5kbSaDLXNo6Hx0maMqB/sG1UmTw97jUR7uJVRzyhkkVwD7HROjWzGVUyGoPqSKMyOB71YxuOu8hIVs7aScjvyDtR6HhnLWzKZ8bcrv6eVk3/Jrn1U0sRxcljNarK0GFikjUjmJ9TunTAYu1gxkVxHCu4/klVtkFt7Da/YUAtLvIW24XgieNGKsJF5ZFIPUdOhplwlyl1grmfleOF5wISwOnIHXr2H90wYMFUbSK/ma5uHkk1zMfQaFR2/Rq%2bS6BNRRv8/Sp9sK5cwb8SbbyfFkGUVG8vdhJwR/0Ncw/gfvQHiRJ1uAGKtb6DI69nB7NWtZfDJxHw95AsqzoA8Dn/VwP6PasSeW4txJayEjkYqUYfSfX8Uq21PXzjXZ07k%2bKyE9jI3gytGG1sqdU68OZ5/GHnHe4Q60HYnVZ2DRDHXZhcddVsDI15b8aNXqaHxTYtj1ieMo/n5GePWwU38x3v81bx%2bRjk4chsYoQiwyl2ZfpJ661%2b53QZspdcRWMFpIfCtYNKvhqDI5A78x%2bn9KLHxIbC3gd3YIvTnOzonY2fWu1UN%2bS3PbP90NMH3TaJqrEx8SrFz1qvCp56JPHDXDvGVzk8ta2OCxELBYgZ3nlKk6HzOW7KBSj8THa44nlmLWbLIgK%2bVIYAf8ApgBzN7miWPifFY17W3UEy68WXl2X12H2A9v1qpJGJiVlQMD33SlFCpWJ4hdhtVJqMgqeoINOCYpAdxE/g1bsLJXuEjeFJTvpG/Zz6A/YmuQjlxElJZSBGpY7Ogo9a1a75hrxFKNobX26dq7heHC4jKQ5BLNZrC/byjLJppbC538pBPYHt1ANdmEu7e5dL6MpKSSCVIDj3H2p3olYKclb5PYOnI0ahiPz01WuAtLixhnkmKM%2btrzdum96r0OHbFFLLOzEdgGPX%2bKmRYn/2Q==' /%3e%3c/svg%3e" width="200" data-src="/assets/static/ed.7ba8522.5d923a7031f9118864e6f4071b7ca97d.jpg" data-srcset="/assets/static/ed.7ba8522.5d923a7031f9118864e6f4071b7ca97d.jpg 200w" data-sizes="(max-width: 200px) 100vw, 200px" class="g-image g-image--lazy g-image--loading" data-v-03f32b16><noscript data-v-03f32b16><img src="/assets/static/ed.7ba8522.5d923a7031f9118864e6f4071b7ca97d.jpg" class="g-image g-image--loaded" width="200"></noscript></span><div class="about-lnk__wrap" data-v-03f32b16><span data-v-03f32b16>ABOUTÂ ME</span></div></a><div class="header-actions" data-v-03f32b16><div class="header-menu__wrap" data-v-03f32b16><a href="/" class="header-nav-link active" data-v-03f32b16>
          Blog
        </a><a href="/projects/" class="header-nav-link" data-v-03f32b16>
          Projects
        </a><a href="/contact/" class="header-nav-link" data-v-03f32b16>
          Contact
        </a></div><div class="nav-menu-right" data-v-03f32b16><!----></div></div></header><main data-v-03f32b16><h1 data-v-03f32b16 data-v-0f5df326>Testing Rails generators with ease.</h1><span class="date" data-v-03f32b16 data-v-0f5df326>October 30, 2020</span><div class="post-content" data-v-03f32b16 data-v-0f5df326><p>Rails generator is a tool provided by the Rails
framework to reduce the human effort of doing
redundant manual things by automating the workflow.</p>
<p>We use Rails generator all the time. Like, when you
run <code>rails new &#x3C;project_name></code> it behind the scenes
use Rails generator. Similarly, when you install a
new gem, some of the gems provide the generator to
make installation and configuring the gem easier.</p>
<p>Refer: <a href="https://guides.rubyonrails.org/generators.html" target="_blank" rel="nofollow noopener noreferrer">Creating and Customizing Rails Generators &#x26; Templates</a>
guide to create generators.</p>
<h4 id="problem-statement--motivation"><a href="#problem-statement--motivation" aria-hidden="true"><span class="icon icon-link"></span></a>Problem statement &#x26; motivation</h4>
<p>To install Action Text into the application,
you run <code>rails action_text:install</code>. The installer
was recently moved from Rails template to a generator.
After moving to the generator we encountered some
issues in the generator like:
<a href="https://github.com/rails/rails/issues/39128" target="_blank" rel="nofollow noopener noreferrer">#39128</a>,
<a href="https://github.com/rails/rails/pull/37823" target="_blank" rel="nofollow noopener noreferrer">#37823</a>,
<a href="https://github.com/rails/rails/issues/40184" target="_blank" rel="nofollow noopener noreferrer">#40184</a>
which weren't caught in the early stage of development.</p>
<p>This was my motivation for looking into writing test cases
for Rails generator. PR: <a href="https://github.com/rails/rails/pull/39317" target="_blank" rel="nofollow noopener noreferrer">#39317</a></p>
<p>Adding test cases for generators which normally
only creates a new file in the system are very easy.
For example, the migration generator.
Migration generator adds a file called <code>db/&#x3C;timestamp>_name.rb</code>
and test cases would assert the generation of the file.
Writing test cases for generators which configures
files into a Rails application was a bit of challenge
until we explore that area.</p>
<p>Let learn it with an example here. Let assume we are writing
a test case for a generator that adds Bootstrap in the application.
The generator would look something like:</p>
<pre class="language-ruby"><code class="language-ruby"><span class="token keyword">module</span> <span class="token class-name">Bootstrap</span>
  <span class="token keyword">module</span> <span class="token class-name">Install</span>
    <span class="token keyword">class</span> <span class="token class-name">InstallGenerator</span> <span class="token operator">&lt;</span> Rails<span class="token double-colon punctuation">::</span>Generators<span class="token double-colon punctuation">::</span>Base
      desc <span class="token string-literal"><span class="token string">"Adds Bootstrap to the application"</span></span>
      source_root <span class="token builtin">File</span><span class="token punctuation">.</span>expand_path<span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"templates"</span></span><span class="token punctuation">,</span> __dir__<span class="token punctuation">)</span>

      <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">add_bootstrap_package</span></span>
        say <span class="token string-literal"><span class="token string">"Adding bootstrap packages"</span></span><span class="token punctuation">,</span> <span class="token symbol">:green</span>
        run <span class="token string-literal"><span class="token string">"yarn add bootstrap jquery popper.js"</span></span>
      <span class="token keyword">end</span>

      <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">import_bootstrap_stylesheet_in_application_scss</span></span>
        <span class="token operator">...</span>
      <span class="token keyword">end</span>

      <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">import_bootstrap_javascript_in_application_js</span></span>
        <span class="token operator">...</span>
      <span class="token keyword">end</span>

      <span class="token operator">...</span>
    <span class="token keyword">end</span>
  <span class="token keyword">end</span>
<span class="token keyword">end</span></code></pre>
<p>To add Bootstrap in the application you require
following files and these needs to be present when
Bootstrap generator runs in the test cases.</p>
<ul>
<li><code>package.json</code> to install NPM package.</li>
<li>Webpacker configured.</li>
<li><code>application.js</code> bundled via webpack.</li>
<li><code>application.scss</code> bundled via webpack.</li>
</ul>
<pre class="language-ruby"><code class="language-ruby"><span class="token keyword">require</span> <span class="token string-literal"><span class="token string">"test_helper"</span></span>

<span class="token keyword">class</span> <span class="token class-name">BootstrapInstallGeneratorTest</span> <span class="token operator">&lt;</span> Rails<span class="token double-colon punctuation">::</span>Generators<span class="token double-colon punctuation">::</span>TestCase
  destination <span class="token builtin">File</span><span class="token punctuation">.</span>expand_path<span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"../tmp"</span></span><span class="token punctuation">,</span> __dir__<span class="token punctuation">)</span>
  setup <span class="token symbol">:prepare_destination</span>
  tests Bootstrap<span class="token double-colon punctuation">::</span>Install<span class="token double-colon punctuation">::</span>InstallGenerator

  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">test_should_add_bootstrap_npm_package</span></span>
    run_generator

    assert_file <span class="token string-literal"><span class="token string">"package.json"</span></span> <span class="token keyword">do</span> <span class="token operator">|</span>content<span class="token operator">|</span>
      assert_match<span class="token punctuation">(</span><span class="token regex-literal"><span class="token regex">/popper/</span></span><span class="token punctuation">,</span> content<span class="token punctuation">)</span>
      assert_match<span class="token punctuation">(</span><span class="token regex-literal"><span class="token regex">/bootstrap/</span></span><span class="token punctuation">,</span> content<span class="token punctuation">)</span>
      assert_match<span class="token punctuation">(</span><span class="token regex-literal"><span class="token regex">/jquery/</span></span><span class="token punctuation">,</span> content<span class="token punctuation">)</span>
    <span class="token keyword">end</span>
  <span class="token keyword">end</span>
<span class="token keyword">end</span></code></pre>
<p>Running the above test cases will fail with
following error:</p>
<pre class="language-ruby"><code class="language-ruby">Expected file <span class="token string-literal"><span class="token string">"package.json"</span></span> to exist<span class="token punctuation">,</span> but does <span class="token keyword">not</span></code></pre>
<p>To tackle this problem we will create a
simple Rails application on setup and run
the generator within the dummy application.</p>
<ul>
<li>Add a simple Rails application in the template:
<code>tmp/templates/app_template</code>.</li>
<li>Add a generator helper that would build the application
on setup. The helper has <code>build_app</code> helper method
which copies the Rails template app in the temp directory.
The generator also defines some path helper methods to
easily find the application, app_template.</li>
</ul>
<pre class="language-ruby"><code class="language-ruby"><span class="token constant">ROOT_PATH</span> <span class="token operator">=</span> <span class="token builtin">File</span><span class="token punctuation">.</span>expand_path<span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"../"</span></span><span class="token punctuation">,</span> __dir__<span class="token punctuation">)</span>

<span class="token keyword">module</span> <span class="token class-name">GeneratorHelper</span>
  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">app_template_path</span></span>
    <span class="token builtin">File</span><span class="token punctuation">.</span>join <span class="token constant">ROOT_PATH</span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"tmp/templates/app_template"</span></span>
  <span class="token keyword">end</span>

  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">tmp_path</span></span><span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">)</span>
    <span class="token variable">@tmp_path</span> <span class="token operator">||=</span> <span class="token builtin">File</span><span class="token punctuation">.</span>realpath<span class="token punctuation">(</span><span class="token builtin">Dir</span><span class="token punctuation">.</span>mktmpdir<span class="token punctuation">(</span><span class="token keyword">nil</span><span class="token punctuation">,</span> <span class="token builtin">File</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token constant">ROOT_PATH</span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"tmp"</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token builtin">File</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token variable">@tmp_path</span><span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">)</span>
  <span class="token keyword">end</span>

  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">app_path</span></span><span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">)</span>
    path <span class="token operator">=</span> tmp_path<span class="token punctuation">(</span><span class="token operator">*</span><span class="token string-literal"><span class="token string">%w[app]</span></span> <span class="token operator">+</span> args<span class="token punctuation">)</span>
    <span class="token keyword">if</span> block_given<span class="token operator">?</span>
      <span class="token keyword">yield</span> path
    <span class="token keyword">else</span>
      path
    <span class="token keyword">end</span>
  <span class="token keyword">end</span>

  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">build_app</span></span>
    FileUtils<span class="token punctuation">.</span>rm_rf<span class="token punctuation">(</span>app_path<span class="token punctuation">)</span>
    FileUtils<span class="token punctuation">.</span>cp_r<span class="token punctuation">(</span>app_template_path<span class="token punctuation">,</span> app_path<span class="token punctuation">)</span>
  <span class="token keyword">end</span>

  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">teardown_app</span></span>
    FileUtils<span class="token punctuation">.</span>rm_rf<span class="token punctuation">(</span>tmp_path<span class="token punctuation">)</span>
  <span class="token keyword">end</span>
<span class="token keyword">end</span></code></pre>
<ul>
<li>Now the last thing to do is update the test cases
to setup the application and run generator within the
application namespace.</li>
</ul>
<pre class="language-ruby"><code class="language-ruby"><span class="token keyword">require</span> <span class="token string-literal"><span class="token string">"test_helper"</span></span>

<span class="token keyword">class</span> <span class="token class-name">BootstrapInstallGeneratorTest</span> <span class="token operator">&lt;</span> Rails<span class="token double-colon punctuation">::</span>Generators<span class="token double-colon punctuation">::</span>TestCase
  <span class="token keyword">include</span> GeneratorHelper

  tests Bootstrap<span class="token double-colon punctuation">::</span>Install<span class="token double-colon punctuation">::</span>InstallGenerator
  setup <span class="token symbol">:build_app</span>
  teardown <span class="token symbol">:teardown_app</span>

  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">test_should_add_bootstrap_npm_package</span></span>
    <span class="token builtin">Dir</span><span class="token punctuation">.</span>chdir<span class="token punctuation">(</span>app_path<span class="token punctuation">)</span> <span class="token keyword">do</span>
      run_generator

      assert_file <span class="token string-literal"><span class="token string">"package.json"</span></span> <span class="token keyword">do</span> <span class="token operator">|</span>content<span class="token operator">|</span>
        assert_match<span class="token punctuation">(</span><span class="token regex-literal"><span class="token regex">/popper/</span></span><span class="token punctuation">,</span> content<span class="token punctuation">)</span>
        assert_match<span class="token punctuation">(</span><span class="token regex-literal"><span class="token regex">/bootstrap/</span></span><span class="token punctuation">,</span> content<span class="token punctuation">)</span>
        assert_match<span class="token punctuation">(</span><span class="token regex-literal"><span class="token regex">/jquery/</span></span><span class="token punctuation">,</span> content<span class="token punctuation">)</span>
      <span class="token keyword">end</span>
    <span class="token keyword">end</span>
  <span class="token keyword">end</span>
<span class="token keyword">end</span></code></pre>
<p>Voila. The test cases for Bootstrap generator should be passing now.</p>
<p><strong>Happy Coding!!</strong></p>
</div><hr data-v-03f32b16 data-v-0f5df326></main></div><footer data-v-1b7f6664 data-v-03f32b16><button class="movetotop" data-v-1b7f6664><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="chevron-up" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="svg-inline--fa fa-chevron-up" data-v-1b7f6664 data-v-1b7f6664><path fill="currentColor" d="M416 352c-8.188 0-16.38-3.125-22.62-9.375L224 173.3l-169.4 169.4c-12.5 12.5-32.75 12.5-45.25 0s-12.5-32.75 0-45.25l192-192c12.5-12.5 32.75-12.5 45.25 0l192 192c12.5 12.5 12.5 32.75 0 45.25C432.4 348.9 424.2 352 416 352z" data-v-1b7f6664 data-v-1b7f6664></path></svg></button><div class="copyright-text" data-v-1b7f6664>
    Made withÂ <span style="color:red" data-v-1b7f6664> â¥</span>Â 2022Â 
</div><div class="footer-icon-group" data-v-1b7f6664><div class="social-links" data-v-4a669013 data-v-1b7f6664><a href="mailto:edrick613@gmail.com" data-v-4a669013><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="envelope" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="svg-inline--fa fa-envelope" data-v-4a669013 data-v-4a669013><path fill="currentColor" d="M464 64C490.5 64 512 85.49 512 112C512 127.1 504.9 141.3 492.8 150.4L275.2 313.6C263.8 322.1 248.2 322.1 236.8 313.6L19.2 150.4C7.113 141.3 0 127.1 0 112C0 85.49 21.49 64 48 64H464zM217.6 339.2C240.4 356.3 271.6 356.3 294.4 339.2L512 176V384C512 419.3 483.3 448 448 448H64C28.65 448 0 419.3 0 384V176L217.6 339.2z" data-v-4a669013 data-v-4a669013></path></svg></a><a href="https://github.com/ed-c137" target="_blank" data-v-4a669013><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="github" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512" class="svg-inline--fa fa-github" data-v-4a669013 data-v-4a669013><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3 .3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5 .3-6.2 2.3zm44.2-1.7c-2.9 .7-4.9 2.6-4.6 4.9 .3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3 .7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3 .3 2.9 2.3 3.9 1.6 1 3.6 .7 4.3-.7 .7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3 .7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3 .7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z" data-v-4a669013 data-v-4a669013></path></svg></a><a href="https://linkedin.com/in/edrickoliveira" target="_blank" data-v-4a669013><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="linkedin" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="svg-inline--fa fa-linkedin" data-v-4a669013 data-v-4a669013><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z" data-v-4a669013 data-v-4a669013></path></svg></a></div></div></footer></div>
    <script>window.__INITIAL_STATE__={"data":{"post":{"id":"c5a26749bc9358e01c8c40eefa52af82","title":"Testing Rails generators with ease.","content":"\u003Cp\u003ERails generator is a tool provided by the Rails\nframework to reduce the human effort of doing\nredundant manual things by automating the workflow.\u003C\u002Fp\u003E\n\u003Cp\u003EWe use Rails generator all the time. Like, when you\nrun \u003Ccode\u003Erails new &#x3C;project_name\u003E\u003C\u002Fcode\u003E it behind the scenes\nuse Rails generator. Similarly, when you install a\nnew gem, some of the gems provide the generator to\nmake installation and configuring the gem easier.\u003C\u002Fp\u003E\n\u003Cp\u003ERefer: \u003Ca href=\"https:\u002F\u002Fguides.rubyonrails.org\u002Fgenerators.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003ECreating and Customizing Rails Generators &#x26; Templates\u003C\u002Fa\u003E\nguide to create generators.\u003C\u002Fp\u003E\n\u003Ch4 id=\"problem-statement--motivation\"\u003E\u003Ca href=\"#problem-statement--motivation\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EProblem statement &#x26; motivation\u003C\u002Fh4\u003E\n\u003Cp\u003ETo install Action Text into the application,\nyou run \u003Ccode\u003Erails action_text:install\u003C\u002Fcode\u003E. The installer\nwas recently moved from Rails template to a generator.\nAfter moving to the generator we encountered some\nissues in the generator like:\n\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Frails\u002Frails\u002Fissues\u002F39128\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003E#39128\u003C\u002Fa\u003E,\n\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Frails\u002Frails\u002Fpull\u002F37823\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003E#37823\u003C\u002Fa\u003E,\n\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Frails\u002Frails\u002Fissues\u002F40184\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003E#40184\u003C\u002Fa\u003E\nwhich weren't caught in the early stage of development.\u003C\u002Fp\u003E\n\u003Cp\u003EThis was my motivation for looking into writing test cases\nfor Rails generator. PR: \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Frails\u002Frails\u002Fpull\u002F39317\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003E#39317\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EAdding test cases for generators which normally\nonly creates a new file in the system are very easy.\nFor example, the migration generator.\nMigration generator adds a file called \u003Ccode\u003Edb\u002F&#x3C;timestamp\u003E_name.rb\u003C\u002Fcode\u003E\nand test cases would assert the generation of the file.\nWriting test cases for generators which configures\nfiles into a Rails application was a bit of challenge\nuntil we explore that area.\u003C\u002Fp\u003E\n\u003Cp\u003ELet learn it with an example here. Let assume we are writing\na test case for a generator that adds Bootstrap in the application.\nThe generator would look something like:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-ruby\"\u003E\u003Ccode class=\"language-ruby\"\u003E\u003Cspan class=\"token keyword\"\u003Emodule\u003C\u002Fspan\u003E \u003Cspan class=\"token class-name\"\u003EBootstrap\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Emodule\u003C\u002Fspan\u003E \u003Cspan class=\"token class-name\"\u003EInstall\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token keyword\"\u003Eclass\u003C\u002Fspan\u003E \u003Cspan class=\"token class-name\"\u003EInstallGenerator\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003E Rails\u003Cspan class=\"token double-colon punctuation\"\u003E::\u003C\u002Fspan\u003EGenerators\u003Cspan class=\"token double-colon punctuation\"\u003E::\u003C\u002Fspan\u003EBase\n      desc \u003Cspan class=\"token string-literal\"\u003E\u003Cspan class=\"token string\"\u003E\"Adds Bootstrap to the application\"\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n      source_root \u003Cspan class=\"token builtin\"\u003EFile\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Eexpand_path\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string-literal\"\u003E\u003Cspan class=\"token string\"\u003E\"templates\"\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E __dir__\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\n      \u003Cspan class=\"token keyword\"\u003Edef\u003C\u002Fspan\u003E \u003Cspan class=\"token method-definition\"\u003E\u003Cspan class=\"token function\"\u003Eadd_bootstrap_package\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n        say \u003Cspan class=\"token string-literal\"\u003E\u003Cspan class=\"token string\"\u003E\"Adding bootstrap packages\"\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token symbol\"\u003E:green\u003C\u002Fspan\u003E\n        run \u003Cspan class=\"token string-literal\"\u003E\u003Cspan class=\"token string\"\u003E\"yarn add bootstrap jquery popper.js\"\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token keyword\"\u003Eend\u003C\u002Fspan\u003E\n\n      \u003Cspan class=\"token keyword\"\u003Edef\u003C\u002Fspan\u003E \u003Cspan class=\"token method-definition\"\u003E\u003Cspan class=\"token function\"\u003Eimport_bootstrap_stylesheet_in_application_scss\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token operator\"\u003E...\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token keyword\"\u003Eend\u003C\u002Fspan\u003E\n\n      \u003Cspan class=\"token keyword\"\u003Edef\u003C\u002Fspan\u003E \u003Cspan class=\"token method-definition\"\u003E\u003Cspan class=\"token function\"\u003Eimport_bootstrap_javascript_in_application_js\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token operator\"\u003E...\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token keyword\"\u003Eend\u003C\u002Fspan\u003E\n\n      \u003Cspan class=\"token operator\"\u003E...\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token keyword\"\u003Eend\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Eend\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Eend\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003ETo add Bootstrap in the application you require\nfollowing files and these needs to be present when\nBootstrap generator runs in the test cases.\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ccode\u003Epackage.json\u003C\u002Fcode\u003E to install NPM package.\u003C\u002Fli\u003E\n\u003Cli\u003EWebpacker configured.\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003Eapplication.js\u003C\u002Fcode\u003E bundled via webpack.\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003Eapplication.scss\u003C\u002Fcode\u003E bundled via webpack.\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cpre class=\"language-ruby\"\u003E\u003Ccode class=\"language-ruby\"\u003E\u003Cspan class=\"token keyword\"\u003Erequire\u003C\u002Fspan\u003E \u003Cspan class=\"token string-literal\"\u003E\u003Cspan class=\"token string\"\u003E\"test_helper\"\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Eclass\u003C\u002Fspan\u003E \u003Cspan class=\"token class-name\"\u003EBootstrapInstallGeneratorTest\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003E Rails\u003Cspan class=\"token double-colon punctuation\"\u003E::\u003C\u002Fspan\u003EGenerators\u003Cspan class=\"token double-colon punctuation\"\u003E::\u003C\u002Fspan\u003ETestCase\n  destination \u003Cspan class=\"token builtin\"\u003EFile\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Eexpand_path\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string-literal\"\u003E\u003Cspan class=\"token string\"\u003E\"..\u002Ftmp\"\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E __dir__\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n  setup \u003Cspan class=\"token symbol\"\u003E:prepare_destination\u003C\u002Fspan\u003E\n  tests Bootstrap\u003Cspan class=\"token double-colon punctuation\"\u003E::\u003C\u002Fspan\u003EInstall\u003Cspan class=\"token double-colon punctuation\"\u003E::\u003C\u002Fspan\u003EInstallGenerator\n\n  \u003Cspan class=\"token keyword\"\u003Edef\u003C\u002Fspan\u003E \u003Cspan class=\"token method-definition\"\u003E\u003Cspan class=\"token function\"\u003Etest_should_add_bootstrap_npm_package\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n    run_generator\n\n    assert_file \u003Cspan class=\"token string-literal\"\u003E\u003Cspan class=\"token string\"\u003E\"package.json\"\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Edo\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E|\u003C\u002Fspan\u003Econtent\u003Cspan class=\"token operator\"\u003E|\u003C\u002Fspan\u003E\n      assert_match\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token regex-literal\"\u003E\u003Cspan class=\"token regex\"\u003E\u002Fpopper\u002F\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E content\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n      assert_match\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token regex-literal\"\u003E\u003Cspan class=\"token regex\"\u003E\u002Fbootstrap\u002F\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E content\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n      assert_match\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token regex-literal\"\u003E\u003Cspan class=\"token regex\"\u003E\u002Fjquery\u002F\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E content\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token keyword\"\u003Eend\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Eend\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Eend\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003ERunning the above test cases will fail with\nfollowing error:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-ruby\"\u003E\u003Ccode class=\"language-ruby\"\u003EExpected file \u003Cspan class=\"token string-literal\"\u003E\u003Cspan class=\"token string\"\u003E\"package.json\"\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E to exist\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E but does \u003Cspan class=\"token keyword\"\u003Enot\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003ETo tackle this problem we will create a\nsimple Rails application on setup and run\nthe generator within the dummy application.\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003EAdd a simple Rails application in the template:\n\u003Ccode\u003Etmp\u002Ftemplates\u002Fapp_template\u003C\u002Fcode\u003E.\u003C\u002Fli\u003E\n\u003Cli\u003EAdd a generator helper that would build the application\non setup. The helper has \u003Ccode\u003Ebuild_app\u003C\u002Fcode\u003E helper method\nwhich copies the Rails template app in the temp directory.\nThe generator also defines some path helper methods to\neasily find the application, app_template.\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cpre class=\"language-ruby\"\u003E\u003Ccode class=\"language-ruby\"\u003E\u003Cspan class=\"token constant\"\u003EROOT_PATH\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token builtin\"\u003EFile\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Eexpand_path\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string-literal\"\u003E\u003Cspan class=\"token string\"\u003E\"..\u002F\"\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E __dir__\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Emodule\u003C\u002Fspan\u003E \u003Cspan class=\"token class-name\"\u003EGeneratorHelper\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Edef\u003C\u002Fspan\u003E \u003Cspan class=\"token method-definition\"\u003E\u003Cspan class=\"token function\"\u003Eapp_template_path\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token builtin\"\u003EFile\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Ejoin \u003Cspan class=\"token constant\"\u003EROOT_PATH\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token string-literal\"\u003E\u003Cspan class=\"token string\"\u003E\"tmp\u002Ftemplates\u002Fapp_template\"\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Eend\u003C\u002Fspan\u003E\n\n  \u003Cspan class=\"token keyword\"\u003Edef\u003C\u002Fspan\u003E \u003Cspan class=\"token method-definition\"\u003E\u003Cspan class=\"token function\"\u003Etmp_path\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E*\u003C\u002Fspan\u003Eargs\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token variable\"\u003E@tmp_path\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E||=\u003C\u002Fspan\u003E \u003Cspan class=\"token builtin\"\u003EFile\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Erealpath\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token builtin\"\u003EDir\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Emktmpdir\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token keyword\"\u003Enil\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token builtin\"\u003EFile\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Ejoin\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token constant\"\u003EROOT_PATH\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token string-literal\"\u003E\u003Cspan class=\"token string\"\u003E\"tmp\"\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token builtin\"\u003EFile\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Ejoin\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token variable\"\u003E@tmp_path\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E*\u003C\u002Fspan\u003Eargs\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Eend\u003C\u002Fspan\u003E\n\n  \u003Cspan class=\"token keyword\"\u003Edef\u003C\u002Fspan\u003E \u003Cspan class=\"token method-definition\"\u003E\u003Cspan class=\"token function\"\u003Eapp_path\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E*\u003C\u002Fspan\u003Eargs\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n    path \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E tmp_path\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E*\u003C\u002Fspan\u003E\u003Cspan class=\"token string-literal\"\u003E\u003Cspan class=\"token string\"\u003E%w[app]\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E+\u003C\u002Fspan\u003E args\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E block_given\u003Cspan class=\"token operator\"\u003E?\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token keyword\"\u003Eyield\u003C\u002Fspan\u003E path\n    \u003Cspan class=\"token keyword\"\u003Eelse\u003C\u002Fspan\u003E\n      path\n    \u003Cspan class=\"token keyword\"\u003Eend\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Eend\u003C\u002Fspan\u003E\n\n  \u003Cspan class=\"token keyword\"\u003Edef\u003C\u002Fspan\u003E \u003Cspan class=\"token method-definition\"\u003E\u003Cspan class=\"token function\"\u003Ebuild_app\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n    FileUtils\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Erm_rf\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eapp_path\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n    FileUtils\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Ecp_r\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eapp_template_path\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E app_path\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Eend\u003C\u002Fspan\u003E\n\n  \u003Cspan class=\"token keyword\"\u003Edef\u003C\u002Fspan\u003E \u003Cspan class=\"token method-definition\"\u003E\u003Cspan class=\"token function\"\u003Eteardown_app\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n    FileUtils\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Erm_rf\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Etmp_path\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Eend\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Eend\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cul\u003E\n\u003Cli\u003ENow the last thing to do is update the test cases\nto setup the application and run generator within the\napplication namespace.\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cpre class=\"language-ruby\"\u003E\u003Ccode class=\"language-ruby\"\u003E\u003Cspan class=\"token keyword\"\u003Erequire\u003C\u002Fspan\u003E \u003Cspan class=\"token string-literal\"\u003E\u003Cspan class=\"token string\"\u003E\"test_helper\"\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Eclass\u003C\u002Fspan\u003E \u003Cspan class=\"token class-name\"\u003EBootstrapInstallGeneratorTest\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003E Rails\u003Cspan class=\"token double-colon punctuation\"\u003E::\u003C\u002Fspan\u003EGenerators\u003Cspan class=\"token double-colon punctuation\"\u003E::\u003C\u002Fspan\u003ETestCase\n  \u003Cspan class=\"token keyword\"\u003Einclude\u003C\u002Fspan\u003E GeneratorHelper\n\n  tests Bootstrap\u003Cspan class=\"token double-colon punctuation\"\u003E::\u003C\u002Fspan\u003EInstall\u003Cspan class=\"token double-colon punctuation\"\u003E::\u003C\u002Fspan\u003EInstallGenerator\n  setup \u003Cspan class=\"token symbol\"\u003E:build_app\u003C\u002Fspan\u003E\n  teardown \u003Cspan class=\"token symbol\"\u003E:teardown_app\u003C\u002Fspan\u003E\n\n  \u003Cspan class=\"token keyword\"\u003Edef\u003C\u002Fspan\u003E \u003Cspan class=\"token method-definition\"\u003E\u003Cspan class=\"token function\"\u003Etest_should_add_bootstrap_npm_package\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token builtin\"\u003EDir\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Echdir\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eapp_path\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Edo\u003C\u002Fspan\u003E\n      run_generator\n\n      assert_file \u003Cspan class=\"token string-literal\"\u003E\u003Cspan class=\"token string\"\u003E\"package.json\"\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Edo\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E|\u003C\u002Fspan\u003Econtent\u003Cspan class=\"token operator\"\u003E|\u003C\u002Fspan\u003E\n        assert_match\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token regex-literal\"\u003E\u003Cspan class=\"token regex\"\u003E\u002Fpopper\u002F\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E content\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n        assert_match\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token regex-literal\"\u003E\u003Cspan class=\"token regex\"\u003E\u002Fbootstrap\u002F\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E content\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n        assert_match\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token regex-literal\"\u003E\u003Cspan class=\"token regex\"\u003E\u002Fjquery\u002F\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E content\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token keyword\"\u003Eend\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token keyword\"\u003Eend\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Eend\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Eend\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EVoila. The test cases for Bootstrap generator should be passing now.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cstrong\u003EHappy Coding!!\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\n","date":"October 30, 2020","tags":[]}},"context":{}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script><script src="/assets/js/app.5fe32469.js" defer></script><script src="/assets/js/page--src--templates--post-vue.6ce8b82f.js" defer></script><script src="/assets/js/13.d0387864.js" defer></script><script src="/assets/js/14.f6f22d9c.js" defer></script>
  </body>
</html>
